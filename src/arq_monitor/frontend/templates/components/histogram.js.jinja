var plotDiv = document.getElementById("{{ plot_id }}");

var plotWidth = Math.floor(plotDiv.offsetWidth * 0.8);
var plotHeight = Math.floor(plotDiv.offsetWidth * 0.5);

var plotdData = [
  {{ x }},
  {{ y }}
];

var bars = uPlot.paths.bars({
  align: 1,
  size: [1, Infinity],
  gap: 0,
});

var plotOpts = {
  title: "Histogram: {{ variable }}",
  id: "{{ plot_id }}",
  width: plotWidth,
  height: plotHeight,
  scales: {
    x: {
      time: false,
      dir: 1,
    },
  },
  series: [
    {
      label: "{{ variable }}",
    },
    {
      width: 1,
      stroke: "#00f",
      fill: "rgb(0,0,255,0.1)",
      paths: bars,
      label: "count",
    },
  ],
};

var plot = new uPlot(plotOpts, plotdData, plotDiv);
